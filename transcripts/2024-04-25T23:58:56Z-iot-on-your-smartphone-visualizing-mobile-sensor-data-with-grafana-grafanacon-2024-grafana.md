# IoT on Your Smartphone: Visualizing Mobile Sensor Data with Grafana | GrafanaCON 2024 | Grafana

Ever thought of using your smartphone as an IoT device? With your phone's built-in sensors, such as gyroscopes, accelerometers, ...

Published on 2024-04-25T23:58:56Z

URL: https://www.youtube.com/watch?v=J5QmQdG2X9Y

Transcript: have you ever wondered how many mobile devices oh sorry just leave it for the end because we're running out of time no do you know how many mobile devices are there in the market today I was doing a research couple of weeks ago and I was really impressed that there's 7.1 billion devices and that number is increasing if we take the fact that there's 8.1 billion population and young kids and mainly elderly people is not using that means some some people in this room might be using at least two mobile phones at least I have my Android and iOS as a developer we have there but what we use mobile phones for usually we search on the internet we do some browsing phone calls this one less and less to be honest we are losing that we listen music social media video calls at least with early people grandpas and stuff we take pictures read books share documents and pictures do some banking some shopping and even we pay but is that all what we can do with a mobile phone what if I tell you that we could detect your post inside this room just by using the Wi-Fi signal every time not for this amount of people that is quite huge but if it's four people in a 20 square meters room and you move out with the Wi-Fi we could be knowing where you are positioning inside that what if we could do Advanced Biometrics how we could do real-time Health Data that tracking of yourself or even better what if I could my physical identity in the network and using biometric I can remove user and password from my favorite applications let's say I want to pick money out from a cash machine I just identify my national ID it's already Ed in the mobile and I get my cash out even though we have augmented reality modeling you know people is now very fan of cyber trucks but in Europe it doesn't fit in the garage so you could scan your garage load and see if it really fits or not but we're already doing things like that uh for example this is I was shopping and getting a unicorn sofa in my home office so you can place it around and play and see how much it's going to cost so there are many many things and something that a lot of people is talking about nowadays is artificial intelligence what if we turn our mobile device into our personal assistant there's a lot of things we can do out and you might be asking well G where we can start with this is going to be our playground most mobile phones comes with different sensors depends on the brand and the manufacturer and how much money you spend but let's start with accelerometer no it measures the accelerometer the acceleration in the three4 dimension usually this one HS for step counting geoscope how you rotate sensor motion AED reality the magnetometer is the compass so helpful for navigation maps and stuff proximity sensor nobody writes on this one but when you call on phone and you drop off the display just in case you don't touch that's the proximity sensor helping there ambient light so you don't burn your eyes or you adapt to what's the brightness surrounding but we have also GPS navigation um putting the coordinates on your pictures when you take so we can track where you took that picture for example barometer if you like hiking or climbing it gives altitude and weather and leader which is a ler sensor that hits objects you get back and it starts drawing 3D maps so quite useful for AED reality and and other things and we can use the communication technologies that we have in our mobile phone like Bluetooth Wi-Fi 4G 5G 6G that is coming in 2013 and we always use the camera as an input device mainly for Biometrics it's going to come really handy what's our playground today so this is how it looks I have my mobile phone and I will share later by the end QR code that you will see live metrics from my phone we'll get those sensors put it out it's going to O It's sorry it's going to hit a iot Gateway and we're going to put all that information inside our core platform you can choose whatever your favorite cloud provider is in this case we're using iot core and each sensor is HD to a specific iot Rule and then I'm going to put all that in a collector called iot sidewise you can do Time series database whatever and connected to grafana there are few other things components in the picture mainly the Kinesis one I don't have the integration done on grafana but you can embed the video and we could be showing all the people sitting here today with us how do we start with this well we need mainly four things connect the device send the data collect and do something with it right so if we start with connecting um we usually Define what we call thing internet of things to identify a device so we can have seral of attributes already on that so any time we Define that attribute we have already pre-populated values that we can just go and fill but mainly what you need is to create a certificate and a policy the policy to let us talk to the cloud platform the certificate to authenticate us so we create the secure connectivity then we need to configure our device which we're going to do a JavaScript on nodejs I'll show the file now and then connect over mqtt the cool thing is that we have 3.11 SPC and 5.0 and it doesn't matter if you send on 311 receive on 5 Z or send 5 Z receive 311 it will work handy so first of all I want to create with simple command it's going graphon then you see that's also demo thing we get an output that is what we're going to use the thing name and the ID identifier that's how we're going to specify this mobile phone later on we create the keys and certificate here you have your private key and this is the file we're going to use on the mobile phone we're mainly building the dependencies and the modules with mqtt and file system then we're going just to get the broker that is the endpoint of my iot platform and change with the thing name that we just got from the previous command and also the certification file and the private key with all that info and setting up that we're going to connect to the endpoint it will just drop down here connect to the broker with all those options Port 8883 file system certificate and so on the thing that we're going to send this on Json format so we have there some levels already accelerometer geoscope and stuff like that once we get all this information and I'm going to store and collect it and what I told sidewise it's going to be an asset model that I'm going to have the serial number of the phone and a set of measurements right now it's only 18 so it's barometer geoscope altitude and all those things but you could add Wi-Fi uh battery status many many other things that's how it looks in the back end what does a user on the front I I'm not good on that part but from a user perspective I have my mobile phone and I just create using infrastructure as a code all the services I need and it gives me two links a QR code and the link for a dashboard that we have pretty fine there what we are going to do is with the QR code I'm going to connect the mobile phone I'm going to link so we can start sending all our sensor information right now as you can see I only have the accelerometer there it enables the camera click it takes few seconds I tried to speed up for the the demo there and we are connected once you see it it gets back to the sensors and now I'm going to watch in my dashboard I have two once for the metrics that we have from the sensors the other one is Wi-Fi battery and stuff like that so far I only have enabled accelerometer so that's the information you will see in the screen and you need to push the bottom that's for security also just when you aable it will start publishing the info up there the script is constantly sending and Publishing the topics with the iot rules that we just defined here's the GPS location this is one of the trips so you know in which hotel I was staying a few weeks ago but it comes down let's put the altitude also to get where we are 95 M and I'm going to switch now to see the other metrics from my mobile phones that's what we use the Wi-Fi signal to get the dense posst inside the room so I can see the strength battery level if I'm charging or not and if it's connected in the CPU utilization you can build this as you want you can merge everything into a single dashboard or you can put it in multiple so now we have our data in the cloud let's visualize this with grafana in AWS you have two ways and FAL show earlier one is you deploy your your virtual machine when it boots up you install the dependencies with the script and grafana or you let someone else manage the infrastructure in my case I prefer someone to manage on my behalf so I'm going to use the grafana dashboard I just link it there so it shows up and I open another tab sorry I'm the guys of tabs and once I pull it there there's a workspace let's create the graphon 2024 version night4 you had a deep dive today on 11 hopefully our service team will upgrade this to let you run the latest version you can have it uh SSO or saml I just check saml because I want to show how you integrate this with OCTA from a developer perspective when you sign you choose the data sources you go by default with everything or the ones you're really using and then the notification system that it's already there and with all this you click and then f few seconds later it will create the workspace where I'm going to take the first portion that is the identifier and use that in Octa so when you connect to OCTA which I already have the manage grafana integrated I just edit the way I sign on inside grafana and what I'm going to do once I edit is put the workspace there and ensure that it's in the region where I already deploy the manage grafana once it's there I will copy the metadata URL because we need to finish the installation on the other side so now we link to have this authentication if you go down it says complete setup you put it and I'm going to Define for the demo just a user type called admin you may have uh Network firewall security different groups and once you get the whole thing it will pop up different Windows let's go there there it goes sign with Sul we get it comes by the fall in dark and to opposed to my previous colleagues I will do it light just switch into to operater when you get old you need more lights now the thing is let's connect the plug-in they showed previously that you have many there I'm going to check the iot sidewise that is the one we want to install click the bottom it's there now what I'm going to do is create a user with access and admin rule that can use this iot service and whatever I have in my infrastructure so I have an access key and a secret key and the default region people usually forget about that put it in the region where you have your resources deploy otherwise you will not see anything and with all that I can start building my dashboard the dashboard you will see comes with iot sidewise and let's start adding altitude and you will see this is from The Collector that we had previously the identifier will be the ID that we have for that device and as soon as we get things there it will start running you need to refresh I will create another one the barometer for example get the property values we set the mobile asset that we have and we create the Ping we could be adding adding up too many you can automate the whole thing by the way yeah I'm showing this as a demo but you could go and automate the 18 measures and have automatically a nice dashboard and don't spend two hours building this h once we get it one more it's X Y and Z you just refresh and you start seeing data that it's pull and this was a short one showing how to do it instead with iot sidew with a A Time stream database where you can connect it and already we have the whole information collected and just look for CPU if you're doing measuring like all the people inside this room was the CPU of all your mobiles I could use this service to really measure and see the impact out there so time to scan if you can scan the code and it will show here if I didn't close the app where's g i sensors you see something there which by the way now you know where I live because that's my home please okay so you will see the accelerometer geoscope magnetometer my battery status and the location it should appear here where we are today start shaking and moving the phone you should be seeing on your mobiles the dashboard all the values coming up and down think of all the applications you can use by pulling out sensors from the mobile a MTI reality even adding something more to the connector you can create new Solutions and we remove this kind of obsolesence that we find on mobile phones and we can reuse it for more and long time you guys are seeing something in the dashboard no oh really let me remove one second let me go in and scan to see if it works probably was the Wi-Fi I was activated there Quick Connect it's quite slow even the 5G Network huh accept oh yeah it's still connecting huh well I leave it connected for the whole day so you guys can follow and see where I'm in this building and and locate we also have couple of things there that if you're really interested there's the another QR code this is live on grafana Sandbox it's a a digital twin model of a industry where you can see the video and the metrics and you can also play around with that one hopefully that one launch better than this one yeah it's showing not connected let me see why it should be there and that's all what I was going to present you today I hope I have bit more time but thanks very much [Applause]

