# Edit your Git-based Grafana dashboards locally

Learn how to to edit your Grafana dashboards locally, or as we like to think of it, "offline" editing. ☁️ Grafana Cloud is the easiest ...

Published on 2024-08-30T17:13:33Z

URL: https://www.youtube.com/watch?v=sPD5ZUeoPus

Transcript: hello my name is Malcolm Holmes and I'm an engineer on the platform cat Squad I'd like to give you a brief demo of grizzly and particularly its new uh Grizzly serve functionality and how this can help us with what I've been calling offline dashboard editing so what do I mean by offline dashboard editing well sometimes we might want to move the source of truth of our dashboards outside of graer itself and manage them on the far system as Json fars or some equivalent so that we can keep them in git so the git becomes the source of Truth rather than grafana itself and our dashboards are deployed into grafana via some kind of CCD pipeline uh after sufficient PRS review process Etc so let's get ourselves configured and ready to use Grizzly so what I have here on the screen is I have a vanilla Graff instance so the first thing I'm going to do is I'm going to come down and I'm going to create myself a new service account call it demo give it admin access and turn it to create now I'll add a service account token generate the token copy to the clipboard okay good so now uh Grizzly uses contexts much like Cube cutle so that it can manage uh multiple grapher instances at the same time so I need to tell it create me a context and call it demo that's done now I say Grizzly config I want to tell it the grafana URL for this context is HTTP Local Host 3000 good now I want to tell it the token it's okay to share this token because it's an ephemeral instance good so now I can say grr uh list minus r for remote minus t for type or Target dashboard so I'm asking it to show me all of the remote dashboards on this grafana instance now if we look here we will see there are in fact no dashboards so we expect this to show no dashboards it didn't show any dashboards but it has successfully connected to uh to to grafana okay so now let me have a look in here if I look in our examples directory we can look at our there's a yaml folder and dashboards in there and here is a sample dashboard here's a really really simple dashboard it doesn't even have any panels but it has everything all the basics for for man managing this dashboard let's say I want to test this the old way I want to test is this dashboard working as I expected I would say grr apply and grizzly would simply push this dashboard to graff's API and I would then reload my grafana dashboards list here and it would show up I can click on it and so on but at this point my dashboard in grafana and my Json bars diverge what if someone someone edits that file and and they don't commit it and oh my God yeah so we really don't want that situation we don't want to have a dashboard that has is still in its review process being available publicly in grafana so what if instead we say Grizzly serve and that particular dashboard file so now you can see here it's listening on port 8080 so what if I go to Port 880 we can now see we've got the grizzly server so I'm now going to select and you can see the available dashboards well the only dashboard available is the one that I referenced in my parameter to this serve command so I click on that and now we have our dashboard obviously no panels in it we wouldn't expect there to be any because there weren't any in the config for it but let's have a look at the dashboard settings and let me insert an X in front here in the production overview title save that save it good okay so let me close this let's go back and have a look at my uh at my dashboards actually let's go back into grafana and have a look at my dashboards reload the page there's no dashboards here so what has the save actually done let me have look at my file again it's added a uh my file now has a few more default Fields set and look there is my X production overview so saving the dashboard over here via the grizzly server has actually written that file to dis G Grizzly has opened a proxy through to to grafana and it has intercepted the load and save events and written those resources back to dis or read them from dis in the case of a load event okay so that's that's great so now what well let's say we want to go the opposite direction I want to edit the file on dis and see it change in grafana so what I'm going to do here is I'm going to do the same thing in a different terminal window grr serve I'm going to do minus W which says watch tells Grizzly to watch my local fine system okay so it's going to watch the same file now I go back to uh let's close this and reopen it there you go back now we can see we've got X production overview because we edited it so let's load that up good we can see the X production overview but that X is it was a demo and it was ugly isn't it so let's remove it so I come here I delete the X I save the file and as I save the file now boom we can see it's disappeared so what's happened here is Grizzly running in the other tab has noticed that a file has changed on the file system it loaded that new file from the file system it made a connection to it passed it and then it told grafana via its live websocket functionality it told grafana to reload the dashboard it reloaded the dashboard and our dashboard is updated but what say if we're working with Jon it in the uh examples directory we've got for example this grr. jonit you can see in here we've got two dashboards prod overview and a new one here called test dashboard so let's say we have a look at the examples prod what's it called uh dashboard simple okay so here we have a very simple dashboard so let me I want to make a similar change to this one I'm going to come here and I'm going to stop my Grizzly server and instead I'm going to tell it to run grr jonet but the file I'm running the file I want to watch isn't grr doj on it it's another one so I give it another directory name watch all files in this directory for changes please so it's going to watch files in this directory and when it sees a change it's going to reexecute this file in order to render all of the resources so let's run that so now that's now watching let's come back to Grizzly go back to the homepage we can now see we've got two dashboards there so I want to look at the production overview one here we go production overview what if I just insert in here my X and I save it blam my X has appeared so in that moment there grizzly rendered the Json it and then pushed the change to your grafo instance or rather informed the grafo instance to reload that particular dashboard because of the change and hence it sees my change so that's most of the demo done uh what we could use this for uh we could use this not just with Json it and static fils but for example if we're using the New grafana Foundation SDK to work in typescript or go we could write ourselves a little file system Watcher uh around our our typescript or go uh dashboard whenever any of our files change on dis it simply runs the the foundation SDK to generate a new Json file we then have Grizzly watch that Json file and again we would have the same effect I make a change to my my typescript or go here save it and instantly we can see the change in our dashboard so this can really help us get the process of evaluating and reviewing our dashboards before we put them into git and pull requests so so much faster but also once we've committed this change into into a pull request our reviewers can use this tool as well they can pull down the the the branch and they can run Grizzly serve and they can then evaluate the change that you're proposing to their dashboard and be sure that it's working as expected so one last thing to say what graph instance should I be using well the graph instance you really want to use is a any graffer instance that has data sources with the same uids as you would have in your production instance now if your organization allows it you can use the production instance if you can get a requisite service account tokens but we could just mock them uh use test data data sources but so long as there is a data source with reasonable data in it such that the D dashboard will look reasonable uh then it can be any graphon instance so I hope that is useful and shows the power of the grizzly serve functionality uh should you have any questions about this please do come to the client admin tuning channel on slack and ask thank you very much

