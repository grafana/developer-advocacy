# Building Interactive Grafana Dashboards for Business Intelligence | GrafanaCON 2024 | Grafana

At Grafana Labs, we lean heavily on “dogfooding” as one way to maintain a close tie with our users' experiences. For the product ...

Published on 2024-04-25T23:48:54Z

URL: https://www.youtube.com/watch?v=gJ55IKaKUOA

Transcript: all right hey everyone uh I'm Chris and I lead our product and growth analytics teams here Graal Labs So today we're going to be talking a bit about how we've been using grafana dashboards internally within our data teams and hopefully share some of what we learned as we began to build more interactive and dynamic dashboards for business intelligence so we'll start out here by going through a bit of an overview as to how and why we've seen interactive dashboards become such a big part of how we communicate data across gra Labs uh we'll then jump in and probably spend the majority of our time going through a bit of a demo where we've got a couple dashboards to Showcase how we would explore some of our uh Community engagement data as well as highlight some of the more Dynamic elements we typically try to build into our dashboards and then at the end definitely want to open it up for a bit Q&A all right so our journey at Graal Labs really began about three to four years ago where a handful of folks on our growth team were really the first to start making use of our business data on a more regular basis and at the time it was a bit of a process in that a lot of our data lived in a bunch of different production systems and folks had to really make use of our CLI to pull that down into csvs and work with it within Google Sheets the next stage of our journey we would really began to build some more of the foundations for our data team today and and really scale out what we were doing with our growth team so we centralized a bunch of our data into big query and really helped to lower the barriers to entry such that now if you could write some SQL and and pull that against our our big query database you can totally get access to a lot of those underlying metrics and then fast forward to today we're thankfully now at a point where we've got multiple teams across grafana really starting to leverage this data on uh a more day-to-day basis and really incorporate it into our underlying workflows and it's really been this last stage of our journey where we've seen interactive dashboards and graphon dashboards in particular play a really critical role in helping us to translate a lot of that underlying data in big query to our broader and potentially less technical audience some of whom might be more interested in you know visually exploring our data or or kind of using our dashboard UI so as we jump over to our our demo here today um I'm hoping to kind of highlight some of the more Dynamic elements that we built in to really try to abstract away some of the underlying kind of custom SQL writing that we normally have to do all right so this is the first dashboard that we have and it's our community overview dashboard where we're really trying to give a broader overall sense of how our community engagement has trended over time and you can see our the way we've approached this is provided some of our Topline kpis up top namely our number of page views unique Pages visited unique visitors and average page views per visitor uh down below we have this kind of daily trend line of our total number of Community page views with our moving average 7day or 7-Day moving average laid on top to try to smooth out some of our kind of weekday weekend variability so the first thing we might want to do as a user is start to drill down on particular areas or time ranges here and so we can start to instead of looking at the last year perhaps look at our last 90 days you can get see I haven't updated the data here in a sec but let's ignore that for a sec uh or you can see maybe some of the data over last six months or perhaps we can start to drill down on this kind of holiday period where we saw a bit of a kind of natural seasonality happening here and see what that does to our kpis and so the way that we're able to do this is to take advantage of the fact that a lot of our underlying data here is being stored in a couple dashboard variables in our time range and so whether or not we're changing it in our uh Dash in our time picker up top or if we're changing it in the time panel UI we're able to pull that down into our underlying SQL through the use of this time filter macro and essentially what this is doing is it's creating a dynamic statement in our work laws that's going to help us contain on whether or not our data fits Within These two time stamps I highly recommend going into the query inspector as a great way to kind of see how a lot of these Dynamic features are interacting with our underlying SQL in that we can see instead of that time filter now we've got this wear statement for our time period being between the first and last time stamp of the time range that we selected awesome so the second thing that we often hear from our users is that this you know day over day uh kind of look at our data is helpful but perhaps if we're going into a weekly standup or monthly All Hands we might want to look at things on a more month over Monon basis or a week over week uh basis and the way that we're able to do that is by taking this kind of userdefined template Dash uh dashboard variable and bring that again down into our underlying SQL here and so you can see just like before we've got this dat trunk statement where we're taking advantage of the fact that we've got this underlying dashboard variable we can bring in which turns out to just be normal equal so we're date trunking our receive date to be based on our month or week or day depending on whichever one our user chooses awesome so the way that we're setting up this uh dashboard variable is that we're going into our dashboard settings leveraging our variables and you can see there are a number of variables that we've set up that are really driving the functionality of our dashboard the first coule that we're using up top are custom variables meaning that we can really Define a static set of values that we want to present to our users so if we wanted to add in quarter or year you can see that we're doing this in this kind of comma separated U format here coming back to the top we can now group our data by quarter or group by data by year granted we don't have that much history so uh there's not as much to present there awesome so as a user the first thing we might see in some of this data is that there has been a bit of a a jump here in August so the way that we would start to explore that is by really taking this data and cutting it into multiple different segments and so we can look at things like whether or not our total page views are coming from our top 100 most popular Pages or our kind of other pages and similarly we can look at whether or not our page views are coming from our newly created versus existing um pages on our community site and how we're doing this is we're essentially starting to toggle the same template variables but we're doing it via a different panel here um so it's really decoupling the capabilities um and allowing us to change the underlying variable through a different panel what's happening is we actually have a hidden variable called monthly groupby which will unhide here and coming to the panel that's being updated you can see effectively on click we're just updating this hidden variable the way that we're doing that is actually taking advantage of the fact that we've got a we've got all of our dashboard variables or template variables encoded in our URL so you can see we got v- time period equals day up here if we change this to week you can see it's now v- time period equals week if we really really wanted to we could totally type into our URL to update this to be month highly recommend not doing that on a regular basis but that's essentially what's happening here just via this onclick method and we're creating that through the use of data links we're essentially a way for us to craft a unique URL based on the values that we have uh that we're clicking on in our UI so you can see we're creating a URL that's associated with our dashboard and passing in a new value for that monthly Group by variable notably there are a bunch of other variables in here because if you don't pass these through grao will think by default you want to go back to the default values and in this case we want to persist everything that uh we've changed previously as our user one tip here is that you can hit control space and see all the values that you can use to craft this URL highly recommend doing that that's pretty much how I I do this on a day-to-day basis awesome so for the rest of this we'll do more of a showand tell in that a lot of the underlying features and and tools are just those three things it's working with Dash data links to create a custom URL that'll update our underlying dashboard variables which will then be used in our SQL so for the rest of this we can start to explore our data and we're starting to see that if we look at our newly created page views there is something that's happening here in our July to to August time frame and if we are able to zoom in on that time frame here and start to filter down our table to just the new newly created Pages we can use this last section which is really intended to highlight individual page contributions and start to preview some of the individual pages that we're seeing and so we can start to notice that each of the k6 uh pages are actually all starting from the same date and if we actually link out to the k6 pages themselves we'll note that these were actually created quite a while ago although in our data they look like they're coming through as being newly created on July 26 2023 so what happened here in in the back end after doing a bunch of searching in slack is actually we migrated our rk6 blogs to be combined with our broader Graal Labs Community forums and so that's why these posts are all starting to be seen on this day even though they were historically um very active the last thing I'll I'll share is that in addition to being able to link out to uh additional kind of outside sort systems we can also link to additional dashboards that give us this ability to have a high level overview dashboard with kind of the broad sense of what's going on in the business and then drill down drill down drill down to a point where we want to get to a more detailed dashboard and I just thought this was pretty cool uh so I threw it in here we essentially looked at our top 100 most common pages in our community put that through open I's embedding model and got the vectors back compressed them down into three dimensions to create this three-dimensional picture of our community pages and by highlighting the selected page and looking at some of the most common next pages and previous pages that our users were clicking on we can kind of get a sense if folks are exploring the same area of our community or if they're hopping around and and going to different Maybe adj basent topics notably we actually can also use data links on some of these dots if they have info so you can totally yeah you can use anything outside of or many of our panels provide the ability to use data links to to jump around uh maybe the last thing I'll I'll point out here if we got it uh bit is that um we also it's it's really interesting um how much kind of the cumulative impact of some of our um kind of interactions can be in that we are actually down here showing some of our next pages and previous pages and just by allowing users to click on the most common next pages that we see in our data we get something similar to a user kind of Journey mapping tool even though it's it's not perfect because we're not following a single user but it pretty quickly gives us a way to identify by uh and and understand a bit of how our users are interacting with our underlying systems awesome so that was a bit of the demo I realized we went through that very quickly uh we might have a lot of time for Q&A I'm wondering if I skipped anything uh I don't think so yeah let's let's go to Q&A and then we can totally talk about other stuff uh if we want to do that yes you do thank you okay so any questions for Chris I'm not good at spotting ah front row here we go yeah um hello my name is Eric I'm from in in elans uh I have question uh if you look at uh those time Ser data where you look at the month value visitors how easy would it be to compare the amount of visitors from one month versus last year and find outli there yes that's a great question um we don't have the dat we don't have our okay that's fine uh it is actually a new setting that we have in okay cool sweet sweet sweet uh we're there's actually a really cool setting in our table um or a stat panel up top which you can now come in and show the percentage change that's happened and so essentially you need to ensure that your data goes back for the start Tim stamp that you want to look at so in this case if you wanted to do year-over-year you'd have your first date be the time last year and then have your last day be the time this year and it'll automatically calculate for you the change year-over year uh as a way to show the the Delta okay on on every speci the reason why I ask is is if you have k6 metrics that is doing a test over a certain period of time and you want to compare it to the previous test you want to find the outliers and I'm was wondering if this could be a way to do that got it yeah and are you saying are you do you have that data in say like a SQL backend or like part part of this is that uh it's helpful at least in in my world to be able to do a lot of the the transformation and calculation in our underlying SQL and in some of our Transformations so we can totally do additional Transformations and do calculation if you can pull in the specific um if you can pull in the specific columns that you or actually I did it here at the bottom if you can pull in the the specific columns that you want to do the calculation on you can add a new column that is actually just kind of the row wise calculation of um in this case Community page views divided by unique visitors so if you if you had both columns you can totally do that cool thanks great thank you good question any other questions for Chris going once yes oh yes Alyssa's got it last time when I we went for the same person Alyssa just went like that to me like stop hi this is s from the Netherlands I'm curious if you're in your team also do anything with alerting uh on these visuals and and showing them in your yeah great question we are starting to get into that quite a bit now particularly as we're trying to alert many of our internal success and support teams as we potentially start to see um individual users see spikes in some of their usage or or billing we not only want to use alerting to try TR to send out automated emails to our users to say hey you might want to check out whichever um kind of billing metric might be spiking but we also want to highlight and identify in slack or in zendesk for our support teams to know and and also try to help out and reach out to our our users so yeah there it's interesting there there definitely a lot of parallels that we're trying to draw from kind of the observability space and apply that to kind of like this this business observability type of approach thank you yeah another good question oh and I can get there before Lista hi I'm Jacob uh I was wondering uh the panels that you show at the dashboard the questions that you formulate are they mostly driven by the you who owns the data or the people who consume your dashboards yeah that's interesting we I I mean I did create those as I was um kind of thinking through the structure of the dashboard but we were actually just having a conversation with some of our PMS to see if we could have this be more um I guess maybe Source driven or Community Driven in that we'd love to have just a list of questions to help go and answer uh maybe a creative way of doing this so you can see how we've done this is essentially just using the text panel and we've done some kind of hacky HTML here to make it work but it could be really cool to link this up to maybe a Google sheet data source and have folks start to insert questions and have that populate that we can kind of draw from and and pull out so yeah we don't do that just yet but that's that's definitely on the list of things we'd love to do thank you any other questions Chris yes uh I'm Chico from my decisive AI my question is it looks like the sto uses a lot of non- telemetry data to show a business intelligence use case which is cool um do you have any examples of trying to merge non- Telemetry data with Telemetry data yes yeah we've definitely tried to do a bit in the past um it's historically been a little bit difficult in that some of the merge transforms didn't always work as we thought they were going to uh I believe in grafana 11 we're fixing a lot of that and there's uh I think we're officially possibly going to support a ability to uh use some SQL like syntax to do joins across different data frames relatively sure that made it in awesome thank you thank you all right any more questions for Chris there's a slight delay when I'm back here and it's quite strange it's like my voice is disconnected from my I don't know face is it is that what your voice is maybe just one one last thing I'd love to show we got a couple seconds yeah is the 3D plot uh huge shout out to I think it was A3 E3 who created this community panel so this is actually is that someone from Star Wars I thought so too yeah uh this is actually essentially a plotly panel which is using a bunch of JavaScript to create this based on the data that's coming in to our data frame and so Forest worth I also learned Javas script for this in particular so this might not be great JavaScript um but yeah it's it's just really cool that there are so many different plugins we can check out yeah that is very cool I don't think any JavaScript is Right JavaScript is it I'm not having to go I love JavaScript but like when you when you've got a function that you meant to pass a string in and instead you can just pass the whole window I mean we've got we got to ask some questions okay any other final questions for Chris scanning going once going twice don't move okay well give it up for Chris everybody

