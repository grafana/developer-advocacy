# 合成テスト、負荷テスト、実ユーザーモニタリングでエンドユーザー体験を把握する方法

Published on 2025-10-24T17:13:21Z

## Description

合成モニタリングを利用すると、ユーザーの操作をシミュレートして分析することができ、デジタルエクスペリエンスの改善に ...

URL: https://www.youtube.com/watch?v=0B8qvIbW7lY

## Summary

このYouTube動画では、トム・マイザーというシニアフィールドエンジニアが「エンドユーザー体験を理解する」というテーマで講演を行っており、主にウェブバイタルとその重要性について説明しています。彼は、ウェブバイタルの3つの主要メトリックス（LCP、FID、CLS）を紹介し、これらがユーザーエクスペリエンスに与える影響を詳述しました。また、エンドユーザーの体験を改善するための具体的なアプローチとして、フロントエンドのオブザーバビリティ、K6を用いたテスト、シンセティックモニタリングの活用方法を示しました。マイザーは、特にeコマースサイトのチェックアウトフローの問題を分析し、どのようにしてそれらの問題を特定し、解決するかを実演しました。全体を通じて、ユーザーエクスペリエンスを向上させるための実践的な方法論に焦点を当てていました。

## Chapters

00:00:00 Introductions and overview of the session  
00:01:30 Introduction to Web Vitals  
00:03:00 Explanation of the three Core Web Vitals metrics: LCP, FID, and CLS  
00:05:00 Importance of user experience in relation to Core Web Vitals  
00:07:00 Discussion on the challenges of maintaining performance as a site grows  
00:10:00 Introduction to tools for identifying and addressing performance issues  
00:12:30 Demonstration of a problematic e-commerce website  
00:15:00 Using Frontend Observability to capture user journeys  
00:20:00 Introduction to K6 for controlled load testing  
00:23:30 Explanation of synthetic monitoring and its benefits  
00:26:00 Summary of tools and their integration for improved user experience  

こんにちは。最後までお残りくださりありがとうございます。もうすぐ今日終わります。今日は「エンドユーザー体験を理解する」というタイトルです。トム・マイザーと申します。シニアフィールドエンジニアとしてK6に特化しています。QRコードを写真撮っていただき、質問があれば最後の方でお答えしたいと思います。それから、アクザエクスパートブースにもこの後参りますので、もし個人的にご質問があれば私を見つけてください。

では、まずは挙手をお願いしたいのですが、この中で「ウェブバイタル」と聞いたことがある方はいらっしゃいますか？ ありがとうございます。いらっしゃいますね。ウェブバイタルとは何かということですが、これは素晴らしいユーザーエクスペリエンスと、それに対して重要であると思われるシグナルです。Googleやウェブパフォーマンスメトリックスが最初に導入したもので、素晴らしいエクスペリエンスとはどういったものかを示しています。

ウェブバイタルのメトリックスは3つあり、Googleが「バイタル」と呼んでいるもので、ユーザーエクスペリエンスに特に重要なものです。このようなレポートをこれまでにご覧になったことがあるかもしれません。このレポートはGoogleのウェブサイトが作っています。左側では「コアウェブバイタル」が表示されています。かなり良いですね、緑が長いです。

コアウェブバイタルには3つの指標があります。まずはLCP（Largest Contentful Paint）これはローディングのパフォーマンスを示しています。LCPは、そのページの読み込みの速さを表しており、ユーザーがリクエストしてからビュー ポートに表示される最大のコンテンツ要素が表示されるまでの時間です。非常に重要なウェブバイタルの指標です。

次に、INP（Interaction to Next Paint）です。これは、ユーザーがクリックをしてから何かが起こるまでの速さを示す指標です。かなり重要です。そして、少し下に切れていますが、CLS（Cumulative Layout Shift）です。これは、スクリーンがローディングの時にどのくらい移動するか、つまりページレイアウトの移動量を示します。読み始めているのにどんどんと下に行ってしまうと、ローディングが終わるとどこにいたのかわからなくなってしまいますので、これはユーザーエクスペリエンスを劣化させます。

右側には私の同僚のウェブサイトが表示されています。パフォーマンスが劣っているようです。オレンジと赤も増えていますので、あまり良いエクスペリエンスではないということになります。しっかりとできる限り緑を多くしたいということです。このコアウェブバイタルのメトリックスは非常に幅広く設計されていますので、まずはそれを特定し、そこから何をするか、そしてROI（投資収益率）をしっかりと図るということが重要です。

優先順位をつけるのはなかなか難しいです。サイトが成長すると機能が増え、サイトがどんどん改良されますが、それと共にいろいろなことが起きるわけです。サードパーティのアセットやAPIのコール、あるいはサードパーティの依存関係もあります。こういったものが潜在的にウェブバイタルの指標に影響を与える可能性がありますので、安定させることや改善が難しくなるかもしれません。

もう一つ留意すべきは、これは単一のページの話だけにとどまらないということです。ユーザーがウェブサイトとインタラクションする時には、そのインストラクションの中にリードオンリーの内容もあり、いろいろなステップがあります。これは典型的なeコマースの流れで、様々なプロダクトの間をブラウジングして、そこからチェックアウトまでの流れです。ウェブバイタルの手法はこのエンドユーザーのジャーニーをカバーできないかもしれません。

これからお見せするのは、あまり良くないウェブサイトを見て、eコマースサイトでそのフローがどうなっているのかを見ます。チェックアウトのフローには、2つ非常に明らかな問題があります。1つはコアウェブバイタルでよく示されるものになりますが、もう1つはウェブバイタルで明らかにはなりませんが、それでもユーザーエクスペリエンスをかなり大きく悪化させる要因です。

これをグラフでどうできるかという観点から見ていきます。問題を特定し、テストを行い、確認し、フィックスし、そして予想通りに機能しているかを確認します。第三者のツールを使ってその問題の視認性を確保し、再発を防止します。これを３つのツールを使って行っていきます。スイスチーズモデルと呼ぶものです。各ツールがチーズのスライスで、各スライスに穴が開いていますが、その穴をそれぞれのアプリケーションで一つずつ潰していくわけです。そして、チーズを通り抜けないようにするということです。

まず、フロントエンドのオブザーバビリティを使って問題を特定します。フロントエンドオブザーバビリティで、実際のユーザーがウェブサイトで何をしているかの洞察を得ます。何にクリックしているのか、どんなジャーニーを経ているのか、エラーに遭遇しているのかをしっかりと捉えて理解します。

次に、グラファクラウドK6でテストを行います。コントロールされた環境でユーザーのフローをeコマースのチェックアウトフローでテストし、そのフィックスが実際にフィックスであるかどうかを検証します。最後に、問題が再発しないためにモニタリングを設定します。合成モニタリングを設定することで、例えば5分ごと、1時間ごと、もしくは1分ごとにテストを実施し、アラートの発生に繋がるようにします。

これらのツールの組み合わせを使って、問題がどのようなものであったのかを示すビデオを流します。サイトに行ってみると、このバナーロードするのにすごい時間がかかり、プロダクトイメージのローリングにもかなり時間がかかります。イメージがなかなか出てこないので、このカートが空だったのが今フルになったのが何が起こっているのか分からないです。ここで発注しようとしても、完了するまでにかなり時間がかかっているので、これは良いユーザー体験ではありません。

では、どういう対応をすればいいのかというと、まずフロントエンドオブザーバビリティを使います。リアルユーザージャーニーをキャプチャします。自動的にフロントアビリティとウェブサイトと投合し、ユーザーセッションを確認できます。エラーも確認でき、ユーザーがどれだけのページにアクセスしたかも分かります。これらの情報を使って、今ブラウザーで見た問題がどこに起因しているのかを確認できます。

最近加えられたものですが、これはフロントエンドオブザーバビリティからバックエンドトレースを見ることができるようになりました。ユーザーがそのサービスサイトで何をしたのかを見ることができます。関連したサービスやユーザーが体験したサービスの内容を全て確認できます。

次に、レモ（K6）でトレースのタブをクリックすると、セッションに作られたトレースがあり、どのトレースに時間がかかったかを確認できます。問題の再確認やさらなる確認をすることができます。このトレースはイメージをダウンロードするというところで、2.8秒以上かかったことが分かります。これはフロントエンドのプロキシサービスのところで、イメージがダウンロードし始める前にクライアントの方に送るまでに時間がかかっています。ここで何かおかしいことが起こっていることが分かります。

このサイトのもう一つの問題は、カートに何かを加える時に、そのカートにたどり着くまでにすごく時間がかかっていることです。この辺り、カートに超えるというリクエストのところも時間がかかっていますので、ここで対応しなければいけない問題が明らかです。

では、スライドに戻ります。問題特定し、ダウンロードイメージをカートに入れるというトランザクションで問題があったことが分かりました。次にグラファクラウドK6でフィックスを作り、問題を再現してまだ問題かどうかを確認します。

そこで使うのが、私の大好きなクラウド、グラファクラウドK6です。これはロードパフォーマンステスティングツールで、スクリプトを書いて何度でもこれを実行できます。テストは非常に統制された環境ですので、何人のバーチャルユーザーにするか、バーチャルユーザー1人でも良いし、現実的にその本番環境で何が起きているかを持して、こういったテストをスケジュールして何回も繰り返すことができます。

K6はメトリックスやレスポンスタイムなどを記録するだけでなく、ログも生成でき、オーダーをうまく出せた場合にはオーダーIDもプリントできます。K6でこれらが全て可能です。同時に店舗との統合もあります。ラファクラウドトレースですので、インストルメントアプリケーションでK6がそれを認識し、生成されたロードテストでのK6を示してくれます。これもかなりパワフルな機能です。

以前はロードテスティングツールがサーバー依存していましたが、レスポンスの情報を使っていました。しかし、サーバー側では正確に何が問題だったのかを手伝えてくれないことが多かったのです。トレースであれば実際にサーバー側で何が起きたのかを見ることができ、分かるようになります。これによってロードテスターは以前よりも多くの洞察を入手できます。

また、プロファイルとのインテグレーションもあり、ファイロスコープとの統合もされていますので、ファイロスコープのフェイムグラフもテストで使えます。新しい特徴として、テストを実際のウェブブラウザーを使って行う機能があります。これによりバーチャルユーザーだけでなく、リアルユーザーとほぼ同じ状況を捉えることができます。

では、次にデモを行います。テスティングシンセティックのメニューでパフォーマンスというセクションがあります。プロジェクトがこちらにハイライトされています。ここに1つプロジェクトが出ています。「チェックアウトユーザージャーニー」です。この2つの棒グラフがあり、一つずつテストを示しています。K6のテストを示しています。左側はフックスが適用される前のテスト、右側はその適用後のテストです。

こちらのグラフがブラウザーのLCP（Largest Contentful Paint）です。この指標を選ぶことができ、トレンディングのメトリックスやレスポンスタイムをK6で収集したものを使えます。フィックス適用前のテストの結果を確認すると、LCPの値が非常に高いことが確認できます。

このテストを行い、改善があったかどうかを検証できます。下にはクラウドインサ（自動化されたアルゴリズム）があり、このテストを分析し、うまくいっているかどうかを確認します。信頼性の値はあまり良くありません。これはウェブバイタルが芳しくないからです。

タイムラインでは、様々なイレーションを選ぶことができます。エクスペリエンスは6.2秒かかっています。このウェブサイトがローディングを終えるまでの秒数です。このように多くの情報が表示されます。

比較表では、フィックス適用後のLCPの値が3.9から1.54に変わります。スライドに戻ります。ここまでのまとめとして、フロントエンドオブザーバビリティを使ってリアルユーザーデータで問題を特定し、K6を使って問題をコントロールされた環境で検証しました。再度繰り返されないようにするためには、シンセティックモニタリングを使います。

シンセティックモニタリングの中には、様々なチェックを設定できます。DNSのノックアップをしたり、簡単なピング、TCPトレースルートチェックなどのテストができます。また、より複雑なテストを設定することも可能です。形式6スクリプトをシンセティックモニタリングで動かすこともできます。

最近、K6のスタジオを作りました。キーノートスピーチでトムさんの方からも言及がありましたが、K6スタジオでより簡単にK6を立ち上げられるようにしました。どのツールもスタートする時にはスクリプティングが必要ですが、K6はユーザーをブラウザーでレコードすることができ、裏側でHTTPをキャプチャすることによりスクリプトを早く作成できます。

最近のK6ブラウザーを動かすことができるようになり、リアルのブラウザーを定期的にステップを踏ませることで、実際のユーザーと同じような形で結果を得ることができます。これにより、ウェブバイタルのメトリックスを補足することができ、簡単に見せたいと思います。

パフォーマンスからシンセティックのところに行き、チェックアウトの設定をオープンし、アップタイムとリーティを確認します。サイトに常にアクセスできるかどうかを確認し、ウェブバイタルもこちらで示されます。グラファクラウドとほぼ同じ形で、一貫性のあるUIで表示されます。

ウェブバイタルのマトリクスが変わっていることが分かります。どのページによっても、アサーションスクリプトに入っていればそれも示すことができます。プロダクトカートとして何個示されているか、カートにアイテムを追加した時のカウントがどうなっているかなども確認できます。

時間と共のパフォーマンスが示され、どれだけ早くチェックが終わったのかも確認できます。必要に応じてより深掘りすることもできます。

スライドに戻りますが、整理しますと、3つのプロダクトを説明しました。これらは単体でも使えますし、お互いと合わせて使うことができます。フロントエンドオブザーバビリティでリアルユーザーデータを収集し、ユーザージャーニーを理解することで、そのジャーニーをコントロールされた環境で再現し、変更を加えた時にプラスの効果だったのかマイナスの効果だったのかを確認できます。

シンセティックモニタリングを使うことで、サービスの健康状態を確認でき、ユーザーの体験が悪化している時に対応できます。これで話が終わるわけではありません。常にこれらのプロダクトを改善させ、より良くインテグレーションできるようにすることを皆さんと共有したいと思っています。

ご清聴、どうもありがとうございました。

## Raw YouTube Transcript

[拍手] こんにちは最後までお残りくださり ありがとうございますもうすぐ今日終わり ますえ本日 はエンドユーザー体験を理解するという タイトルですトムマイザーと申します シニアフィールドエンジニアとしてK62 K6に特化していますもうご存知です ねQRコードを写真撮っていただき質問が あればおせ 最後の方でお答えしたいと思いますそれ からアクザエクスパートブースにもこの後 私参りますのでもし個人的にご質問があれ ば私がおりますので見つけてくださいそれ で はまずは挙手をお願いしたいんですがこの 中でウブバイタルと聞いたことある方 いらっしゃいますかご存知の方あるいは 名前聞いたことある方ありがとうござい ますいらっしゃいますねウェブバイタルと は何かということです がえこれ は素晴らしいユーザーエクスペリエンスと はどういったようなものかということそれ に対して重要であると思われてるシグナル ですGoogleあるいはウブ パフォーマンスメトリックスが最初に導入 をしまし た素晴らしいグレートエクスペリエンスと はどういったようなものかということを 示していますウブバイタルのメトリックス 3つあり ますGoogleがバイタルと呼んでいる ものであり ますえユーザーエクスペリエンスに特に 重要であるもの ですこのようなレポートこれまでご覧に なったことあるかもしれませんこの レポートはGoogleウェブサイトが 作っていますのでこの場合左側ではコウブ パイルgrafana.comえかなり いいですね緑が長いですそしてコウブ バイタル3つありますのでまずはえlcp ペイントこれはローディングの パフォーマンスを示してい ますこのlcp はその ページの読み込みの速さですローディング の速さ ですユーザーがリクエストしてからビュー ポートに表示される最大のコンテンツ要素 が表示されるレンダリングされるまでの 時間です非常に重要なウブバイタルの標 です次に inpですこれはティティを示しています ですのでクリックをして から何かが 起きるそしてバタンをクリックしたという 風に示すえそのレスポンスまでの速さを 示す指標ですかなり重要ですそして ちょっと下切れていますがCLSラティブ レイアウト シフトこれはそのスクリーンが ローディングの時にどのくらい移動するか シフトの量です 読み始めているのにどんどんと下に行って しまうローディングが終わるとどこにいた のかわかんなくなってしまうというとこれ はユーザーエクスペリエンスは劣りますの でページレイアウトの移動量ということに なりますそれから右側には私の同僚の ウェブサイト ですこれは何なのかま少しパフォーマンス が劣るようですよねえオレンジと赤も増え ていますのであまりいいエクスペリエンス ではないということになってしまいます でえしっかりとできる限り緑を多くしたい ということ ですこのこのコアウェブバイタルの メトリックス非常に設計上幅広く設計され ていますですのでまずはそれを特定すると いうことそしてそこから何をするかと いうえそしてこのRoi投収益をしっかり と図るということが重要ですえその優先が なかなか難しいですサイトが成長すると 機能が増えますそしてサイトがどんどん 改良されるわけですがそれと共に色々その 中で起きることが増えるわけですサード パーティのアセットもあるいはAPIの コールもある しあるいはサードパーティの ディペンデンシー依存関係も あるこういったものが潜在的にこのウェブ バイタルの指標に影響を与える可能性が ありますしっかりと注視をしていても安定 をさせることが難しくなるかもしれません あるいは改善が難しくなるかもしれません もう1つ留意すべき はこれは単一のページの話だけにとまら ないということですユーザーが ウェブサイトとインタラクする時にはその インストラクションのその読むだけの リードオンリーの内容もありますし色々な ステップがあり ますこれは典型的なeコマースですのが 流れとして様々なプロダクトの間を ブラウジングしてそしてそこからえ チェックアウトまでとウブバイルスの手法 はこのエントエンドのジャーニーをカバー できないかもしれませんこれも1つ心に 飛べておくべきことだと考えてい ますそれではこれからお見せするの はこのあまり良くないウェブサイトを見て みてEコマサイトでそのえ今示したその フローがどうなっているのか見ます チェックアウトのフローがどうなっている の か2つ非常に明らかな問題がエンド ユーザーであればあるわけです1つ がコアウェブバイタルでよく示されるもの になりますもう1つ はアウバイタルで明らかにはなりませんが それでもユーザーエクスペリエンスを かなり大きく悪化させる要因 ですこれ をグララでどうできるいう観点から見てき ます問題を特定しそしてテストを行って そして確認をしそしてフィックスしそして 予想通りに機能しているかを確認して そして第3者のツールサードツールを使っ てえその問題がの視認性ビジビリティを 確保し再発を防止し ますこれを3つのツールを使って行って いき ますスイスチーズモデルと呼べと思います 各ツールがチーズのスライス で各スライスがえ穴が開いてるんです がその穴 をそれぞれのアプリケーションで1つずつ 潰していくわけ ですそしてチーズを通り抜けないように するということ ですまずフロントエンドの オブザーバビリティを使って問題を特定し ます フロントエンドオブザーバビリティ でまずはえその実際のユーザーが ウェブサイトで何をしているかという洞察 を得ますそして何にクリックしているのか どういったようなジャーニーを経ているの かそしてエラーにえ遭遇しているのかそれ らもしっかりと捉えて理解していき ます次にグラナクラウK6ここでテストを 行います そしてコントロールされたラブの環境に おいてユーザーのフローを eコマースのチェックアウトフロー をえユーザーにアプローチをしてえそして そのフィックスが実際にフィックスである かどうか検証し ますそして最後に問題が再発しないために モニタリングを設定するま合成 モニタリングを設定するそうすることに よってまあのある頻度で例えば5分ごと1 時間ごともしくは1分ごとまテストを長と 実施するそうすることによってアラートの 発生に つなげるまそのえ直したものからまた問題 が発生してないかというものを確認すると いうことでありますでこれらのツールの 組み合わせを使っ てでその問題がどういった問題だったの かってことを示すビデオを流しましょで サイトに行ってみるとこのバナーロード するのにすごい時間がかかったプロダクト イメージのローリングにもかなり時間が かかったでイメージがなかなか出てこない でこの@そのカートああまエンプティだっ たのが今フルになった何が起こってるのか 分かんないでここでその発注しよとしても で完了するまでにかなり時間がかかって るっていうのでまこれ有子体験として決定 いいものではないのでだっ たらこれにはどういう対応すればいいのか と [音楽] まずあのえ1つ目のステップとして フロントエンビリティを使いますでリアル ユーザージャーニーをキャプチャされて おります自動的 にフントアビティとウェブサイトと投合し た結果こうなっておりユーザーセーション を見ることができますしエラーも確認でき ますところでしっかりとその確認できます しユーザーがどれだけのページにアクセス したかということも分かりますあるその 時間体においてまこれらの情報を使っ てその今ブラウザーで見た問題がまどこに 禁してるのかを確認できると思いますで 最近その加えたものなんですけどこれは フラントエンドオブザーバビリティから バックエンドトレースを見ることができる まユーザーががそのサービスサイトで何 やったかっていうところを見ることが できるようにするなので関連した サービスえそのユーザのその体験がした そのサービスに使われた内容っというもの 全て確認することができる次がレモになっ てたんじゃないかと思うんです がでこれをフルスクリーンにし てこれがフロントエンビティでありまして 今サイドナビゲーションのメニューを見て いただくとフラントエンドに入ってるのが 見ますこれがアプリケーション ですでちょっとその過去に戻っております Webでこの問題が発生したのは今朝の6 時朝6時ってことですねlcpの数値 ラジコンforPainこれが3.4秒な ので改善する必要があるオレンジになって いるCLSだとかIMPもあのマトリック も改必要があることが分かりますでエラー がないですねえそのエラーは発生してない ことはいいですがただユーザーの体験と いう観点から良くないことが起こってる ことがそこを見れば分かりますでこの時間 帯でこのページロード数が示されており ますそこまで忙しくないっていうことが 分かりますでパフォーマンスの内訳が示さ れておりますま実際にビジットされた ページこれがホームページでここにおいて lcpの数値が高いという ますプロダクトのページでもしりですなの で問題は1つのページだけの問題ではない ということが分かりますでここで セッションのタブをクリックするとえここ のセッションを確認することができます このの時間帯 で行われたものユーザーがホームページに 行ってからねそれ以降の部分が示されて おりますでここを見てみる とでWeのマトリックこのだの場合だと ご覧いただけますようにlcpは3秒を 超えてることが分かりますまこのユーザー にとって ですで アクティビティの情報をその下で確認する ことができますタイムスタンプもついて ますでまずホームページのロードして セッションがま同時にスタートしたとで 様々なそのタイミングがウバトル上の記録 されておりますし実際にどういうあの やり取りがあったのかえこれはその プロダクトを見た後でHTTPの リクエストにつけなっ てそしてここでえオレンジでまlcpが あのかなり時間高いということが試されて おりますまほぼ4秒かかってると そしてこのlcpのその数値は何を意味し てるのかっていう情報がもう少しここに 入っておりましてま最近そのこやったの はまどのエレメントこの高いlcpの数値 はどのエレメントに属してるのかっていう ことを確認できる形にしましたでそこから また戻ってでまたこの報告されてる タイミング礼ちょっとのお水をいただきに 行き ますかなり乾燥してますね いいです かでこの中にアカードえカートへ加えると いうトランザクションがどこかにあるはず なんですけどカートに加えるここです ねこれはカートに加えるというところ で間違ったやつをクリックしちゃいました あちょっとどっかに行っちゃったみたい ですあのでちょっと戻ってでトレスのタブ をクリックするとこれはまトレスまこの セッションに作られたそのトレースがある のででこのデュレーションでまどの トレースに時間がかかったのかっていう ことを確認することができますまそうする ことによって問題の再確認えさらなる確認 をすることができますこのトレースは イメージをダウンロードするというところ でご覧いただけますようにえ2.8秒以上 かかったとえこれはフロントエンドの プロクシーサービスのところですま イメージがダウンロードし始める前にえ そのクライエントの方に送るまでなので ここで何かおかしいことが起こってるそこ まで時間がかかるはずはないですこの イメージの取り扱いについてで他のところ どこか でま様々なトレスが示されているこれが そのえカートに加えるのトランザクション の部分ででこのサイトのもう1つの問題 カートに何かを超える時にそのカートに あのたどり着くまでえすごく時間がかかっ てるあとこの 辺りそのカートに超えるというリクエスト のところも時間かかってるなのでここで ある問題には対応しなければいけないこと が明らかですはい ではスライドに戻り ます問題特定 しダウンロードイメージえそれをカートに 入れるというトランザクションで問題が あったことが明らかなのででは次 にグラファクラウドK6です ねフックスを作ってえこれは良かったです ね次 にここで問題を再現してまだ問題かどうか を確認し ますそこでそれに使うのがえこの私の 大好きなクラウドえグラファなクラウドK 6ですこれはロードプロパフォーマンス テスティングツール ですスクリプトを書い て何度でもこれを走らせることができる テストは非常に統制されたアボ環境ですの でえ何人のバーチャルユーザーにするかえ バーチャルユザー1人でもいいしあるいは 現実的にその本番環境で何が起きてるかを 持してえこういったテストをスケジュール して何回も繰り返すこともできますえどの 時間軸でも行えますK6の設計 上非常にcicbパイプラインにも統合し やすいのでえ自動テストを行うという場合 に はコードが毎回変更するかもしれない あるいは定期的に夜間ごとに変更となるか もしれませんそういったこともK6では 簡単に行えますK 6はメトリックスレスポンスタイムなどを 記録するだけでなくえログも生成できるし そしてえオーダーをうまくえ出せた場合に はオーダーIDもプリントできるいうこと ですKCでこれらが全て可能ですと同時 に店舗との統合もありますラファな クラウドトレースですえですので インストルメントアプリケーションでK6 がそれを認識してえそしてその生成された ロードテストでのK6を示してくれますえ これもかなりこのパワフルな機能です以前 はロードテスティングツール付加試験で あればサーバー依存していたんですえ そしてそのレスポンスの情報を使っている しかしながら応にしてSTP500 インターナルサーバーエラなぜかわから ないということがよくあったんです サーバー側では正確に何が問題だったのか を手伝えてくれないできないとしか言わ ないわけですでもトレースであれば実際に サーバー差がで何が起きたかをえ見えます 分かりますこれによってロードテスター このテスターを行う方が以前よりも多くの 洞察を入手でき ますまたプロファイルとの インテグレーションもありますファイロ スコープとの統合もされていますので ファイロスコープえフェイムグラフも テストで使え ますそして1つ加えた新しい特徴がテスト をえ実際のウェブブラウザーを使って行う という機能ですK6ブラウザーと読みます これによってえバーチャル ユーザー httpgrpcWebトラフィックだけ をえシミュレーションしている方であっ たりそれに加えて ブラウザーのブチルユーザーも加えること ができますリアルユーザーとほぼ一緒です のでそれによってユーザー エクスペリエンスを別の形で捉えることが できますより実際のユーザーがやっている ことに近い状況を捉えることができます またえクリスクリーンショットも取れる しユーザーがそのそれぞれのその アプリケーションのセクションの ナビゲーションに使う所要時間なども 分かりますK6これJavaScript で書かれていますK6のブラウザーの APIこれはプレイライトとプレイライト と似ていますマイクロソフトのツール でえセレニウムセレニウムも聞きたこと ありますでしょうか非常に似たよAPIに なってい ますではこれを次に動かしてみましょう デモ ですではテスティングシンセティックです メニューでパフォーマンスという セクションがありますプロジェクトが こちらにハイライトされていますここに1 つプロジェクトが出ています チェックアウトユーザー ジャーニーこの2つの棒グラフがありまし て1つずつテストを示していますK6のの テストを示しています左側に はこれはフックスが適用される前のテスト 右側に はその仕様後のテストですこちらのバ グラフこれ がブラウザーのLCピーチということで このどの支障を表すか選べます トレンディングのメトリックスあいは サバサバな指標をK6で収集したものを 使え ますあるいはレスポンスタイムhttpの リクエストに基づいて表示したいという こともありえますlcpWebパイルズ メトリックスそれをここのトレンディング メトリックスに使うことができますかなり えその全5で違いがありますですのでこの アフターテストまずはビフォアからいき ますこれがFIXが適用される前です今 テストランを開いてい ますこれがテストを行った際の様子 ですパフォーマンスのオーバー ですK6のブラウザーテストですのでWe バイタルの標が出ていますhttpテスト であればこれはないですブラウザないので Webバイルズも生成されませんでも こちらではlcpもfidSCSSCP IMPtfpありますそしてlcpの値が 非常に高いということで問題があるという ことが確認できますこのテストを行います がなくなったかどうかを好きなだけ検証 できますそして下にはクラウドインサこれ は自動化されたアルゴリズムこのテストを 分析します そしてうまくいっているかどうかを確認 できますリビティ信頼性あまりよくあり ませんオレンジですというのはウブ バイタルがあまりうまく芳ばしくないから ですそれからタイムライン時間軸ですここ でも様々なイレーションを選びます のエクスペリエンスは6.2秒かかってい ますこのウェブサイトがローディング 終えるまでの秒数ですねなどなど入って ます多くのえ情報がこちらに表示されてい ますそれから1番上に は様々な他のテストと比較できます例えば ポストフィックスフィックス適用 後これであれ ばlcpの値が変わります3.9から 1.54になりますこれが比較表です そして点線はこの比較対象のテスト ですで はスライドに戻り ますなのでここまでのまとめフロント エンドオブザーバビリティを使ってリアル ユーザーデータでえ問題を特定しでK6を 使って問題をせこれはコントロールされた 環境においてそしてフィクスを検証しまし たそしてこれが再度繰り返されないように する必要がありますなのでそのためには何 ができるかということなんですが シンセティックモニタリング合成 モニタリングの方に行きますこの シンセティックモニタリングの中には いろんなチェックを設定することができ ますでDNSノックアップをしたりで簡単 なピングTCPトレースルートチェックと かもやることができますしまたより複雑な テストを設定することもできます例えばえ 形式6スクリプトをシンセティック モニタリングでま動かすこともできますな のでこの機能はかなりそのパワフルなもの でありますまロードテストのスクリプト トっていうものはあると思うのでまそれを シンセティックモニタリングの キャパシティで動かすことができるように するまちょっと異なってるんですけど基本 としてはも同じようなものでありますなの で今それは簡単にできるようになりました なのでスクリプティングをえ加えるそのを ことができるようにしまし たあとえマルチステップのモニタリング モルタステップモニタリングhttp リクエストの複雑なシークエンスUIを 用いてえこのモルhttpを使うことも できます しでこれから新たなものでスクリプトをK 6から拾ってきてシンセティック モニタリングの方に反さすることができ るっていうやつです また最近えK6のスディオっていうものを 作りましたキーノートスピーチでトムさん の方からも言及があったんですけどK6 スタデオでもうより簡単にKSを立ち上げ られるようにしましたまどのツールだろう がスタートする時にはスクリプティングが 入ってくるんですがそれに関連するapi もあるのでそれを学ばなけはいけないで 結構面倒だねまどういうその複雑なその シミュレーションをしようとしてるかに よってくるわけなんですがKC流はその ユーザーをブラウザーでそのえレコード することができます裏側でHTPを キャプチャーしそうすることによって スクリプトを早くすることができるそれを そのK6で動かすことができるというもの ですで最近のえこのK6ブラウザーを 動かすことができるっていうやつでま リアルのブラウザーを定期的にえステップ をま踏ませるま実際のユーザーと同じよな 形ででその結果としえこれらのWebへの バイルスのメトリックスをま補足すること ができるわけです簡単にでもお見せしたい と思い ますはい でパフォーマンスからシンセティックの ところに行ってチェックアウト ま先ほどあの設定したやつをオープンしで アップタイムとリーティを確認し てるでサイトに行くことができるのか常に アップされてるのか時々消えるのかまこの えパーセンテージに影響が与えられる形に なりますでWebバイタルもこちらの方で 示されておりますまグラファクラウドと ほぼ同じような形でま一貫性があるとま 同じUI同じ色使いになっています でウブバイタルのマトリクスが変わって いることが分かりますどのページによって またアサーションえスクリプトに入って いればそれも示すことができます他の セッションでカバーはできなかったんです けどアションもあえ使うことができますま いろんなものにファルスコンディションと し てなのでプロダクトカートとしていくつ 示されているのか何かをカートに加えた時 にでカートにおけるそのカウントが1つで なってるか で注する際にそのメッセージが出てくるえ そのえ無事その注文が通った 後なのでこのようなスタンションという ものは好きな形で好きな数を入れることが できますで時間と共のパフォーマンスが 示されており ますどれだけ早くこのチェックをやって 終了しここでちょっとブリップがあります けど もでこの時に何が起こったかっていうこと を確認してもいいかもしれませんしログも ありますえ必要に合わせてよりその深掘り することもできますその結果につい てでスライドに戻り ます でその整理しますが3つのプロダクトを 説明しましたスタンダーオンで使うことも できますしお互いと合わせて使うことが できますでフラントエンド オブザーバビリティでリアルえユーザー データをその収集しえユーザージャーニー を理解するケシをちることによってその ユーザージャーニーをそうコントロールさ れた環境で再現させで検証をする変更を 加えた時にそれはプラスの効果だったのか マイナスの効果だったのかを確認すること ができるセンティックモニタリングを そして使うことによってサービスのそのえ 健康状態を確認することができるなので ユーザーの体験が悪化してる時に対しての アウトが出るとでそこで話が終わるわけで はありませんま常に毎日のようにこれらの プロダクトを改善させよりうまく インテグレーションできるようにするそれ を皆さんと共有していきたいという風に 思っておりますえご清聴どうもありがとう ございました

