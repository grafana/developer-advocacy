# Tempo Community Call July 2025

Published on 2025-07-14T13:28:16Z

## Description

Grafana Cloud is the easiest way to get started with Grafana dashboards, metrics, logs, and traces. Our forever-free tier includes ...

URL: https://www.youtube.com/watch?v=CdYwfspTOjc

## Summary

In the July Tempo community call, the team discussed several important updates and topics regarding the Tempo software. Key highlights included the announcement of Reslin as a new maintainer, the release of Tempo 2.8.1 which fixed a rare bug, and the resolution of a longstanding bug related to live traces that had been affecting data quality metrics since the software's inception. The conversation shifted towards the upcoming architecture changes, particularly focusing on the integration of Kafka and the implications for both single binary and distributed modes. Attendees, including Mario and Pavo, shared insights on the potential for community involvement in developing a Kafka-less version and the need for documentation to aid in the transition. Overall, the call emphasized collaboration and ongoing improvements within the Tempo community while addressing user needs and future developments.

# July Tempo Community Call Transcript

Hello everybody and welcome to the July Tempo community call! We have a pretty good turnout today, so let's get rolling quickly. As always, if anyone has questions or comments about any of the topics, feel free to raise a hand, put it in the chat, or say something to get our attention. 

We also have an agenda, so if you'd like to add a topic, feel free to do so there. Without further ado, let's look at the first item: **Reslin is a new maintainer of Tempo!** This is incredibly exciting. 

You probably know about this already; unfortunately, he isn't here today. He was meant to appear with a strawberry filter, but I guess we'll have to keep checking back. Reslin has been doing great work, especially in query correctness. 

### Upcoming Tempo Release

Moving on, the next Tempo release will include a lot of bug fixes, especially concerning **tracing metric queries**. 

Tempo version 2.8.1 has been released, and we have some release notes. One key fix addresses the hash collision bug. Who actually fixed that one? Are they here? 

I think neither Carlos nor Marty are present today, but I see Joine here. This patch release contains a single bug fix related to a hash collision because we were using a 32-bit version of a hashing algorithm. Thankfully, it was only encountered by one customer, so it seems to be quite rare. But yes, it’s now fixed!

### Longstanding Bug with Live Traces

We also had a longstanding bug with live traces. Mario, you might be the best person to explain this one.

**Mario:** Yes, it has been a very long-standing issue—since before the first major release of Tempo, in fact. We checked when this code was introduced, and it goes back to 2019. There is a concept of "live traces" in the system, which are traces that have received a new batch of spans in a configurable interval. 

For a long time, we believed we were respecting the default interval of 10 seconds. However, we were actually flushing every 10 seconds due to a bug where we were doing time checks after instead of before the flush. 

As a result, we were constantly flushing traces instead of allowing them to accumulate. This bug significantly impacted data quality metrics, which indicate the percentage of complete traces that have a root span and whether they are connected or disconnected. 

The main use case for live traces is to ensure that traces are contiguous, improving performance when inspecting them. Now, we should see better performance as traces will be read in a continuous manner rather than being fragmented. 

It’s quite amusing that this bug persisted for almost four or five years without being noticed. 

### Discussion on New Architecture and Kafka

Now, I think this brings us to a major topic, especially since Pavl sparked it. He had asked in the community channel about alternatives to Kafka. Mario, do you want to discuss this further?

**Mario:** Sure! First of all, when do you plan to release the new architecture? 

It’s important for us to know if there’s a chance to keep the Kafka-less option as a community effort. We’d like to establish some APIs that allow alternatives to Kafka without needing additional third-party components for Tempo.

As for the release, we don’t have a strict date yet, but a reasonable estimate is the second half of this year, possibly Q3 or Q4. We’re targeting a major release with the new architecture, and we’re continuously rolling out new components.

Most of our installations run Tempo distributed with microservices, but we know the community primarily uses the single binary option. We don’t want to alienate that community by dropping support for it.

The new architecture is currently designed around Kafka concepts, so it would be challenging to support anything besides Kafka-compatible systems right now. We rely on concepts like partitions, topics, and consumer groups, which are not abstracted.

However, our goal is to use a small surface area of Kafka. We currently only use a few calls, so implementing something that supports those calls is feasible. There are many options, from building something into Tempo to having a Kafka simulator that runs with it. 

**Pavl:** We need to understand the implications and if the community is willing to make this work. Perhaps we can build a proof of concept and evaluate our options and trade-offs.

**Mario:** We have many design documents and diagrams for the new architecture that we can share. We haven’t released them yet, but we’re happy to provide insights into the main changes. 

**Pavl:** It would be helpful to have something to start with, like a draft or design document.

**Mario:** I can work with Jim, our documentation person, to create something readable and easy to consume. 

### Expectations for Documentation and Future Releases

As we prepare for the upcoming release and architecture change, we’d love input on the documentation structure. I’ll post on the community forum with what we’re planning. 

Can we expect Tempo 2.9 before the Kafka changes?

**Mario:** Yes, definitely. I would be shocked if we don’t reach 3.0 before 2.9 or even 2.10. There’s still work to do, so the migration won’t happen immediately. 

**Robert Jacob:** When is Tempo 3.0 and the Kafka change scheduled?

The Kafka changes will likely come in the 3.0 release, targeting the latter part of this year. Meanwhile, the new architecture will be gradually introduced in previous minor versions of Tempo.

**Mario:** Each database team works independently, but we share information and influence each other. The timelines may differ because the changes needed for Loki are more ambitious than those for Tempo.

### Closing Remarks

If there are no further questions or comments, I appreciate everyone for joining today. We had some great conversations and action items come out of this call. We will see you next month!

Thank you all!

## Raw YouTube Transcript

Hello everybody and welcome to the July Tempo community call. Got a pretty good house today, so we're going to get rolling pretty quick. As always, if anyone has any questions or comments about any of the topics, feel free to raise a hand, put it in chat, say something, whatever it takes to get our attention. Um, we also have an agenda. If you'd like to have a topic, feel free to add it there. And without further ado, let's go into the agenda and take a look at the first thing, which is, drum roll, Reslin is a new maintainer of Tempo, which is incredibly exciting. Yeah. What if I would like You probably know that we're announcing it, so he's not coming. Yeah. He He was meant to appear with a strawberry filter, but keep checking out I guess. Yeah, I think he's been doing a great work especially on uh query correctness. I would like to highlight um and yeah the next uh temper release is going to have a lots of back fixes especially on traical metric queries. Um yeah which is is very nice. Awesome. Moving on, not much. Working off the agenda here. Tempo2.8.1 released. Um, I think we have a bunch of notes. Not a lot there about the fixed the hash collision bug. Who actually did that one? Are they here? Um, I think no, Carlos nor Marty are here. Uh, but yeah, there was a I'm Joe Joine today. Uh so yes this uh patch release has a single bug fix. Uh there was a has collision bug because we were using a 32bit version of a hashing algorithm. I think it is uh was the problem. Um there was only one customer user that saw this. So seems to be pretty rare. Um, but yeah, now now it's fixed. Awesome. All right. And then moving on, we had a longstanding bug with live traces. Mario, you might be the best person to know about it. Yeah, very long. Yeah, very longstanding. I think as long as before the first major release of tempo. So before tempo uh v1 we we checked when this code was introduced and like 2019. Um so yeah essentially there is this concept of black traces in the injust. A like trace is essentially a trace that has received a new batch of spans in the past few seconds. Uh which is a configurable interval and that has existed for as long as tempo has existed basically and all this time we thought we were respecting that interval uh which was its default was 10 seconds. So, uh we thought that uh we were not cutting traces into the wall into blocks um as long as they had received a new batch of spans in the past 10 seconds. Uh that turned out not to be the case. Uh we were actually flushing every 10 seconds cuz the silliest of bugs instead of doing time before we were doing time after. So every every time every trace uh fulfill the condition to be flushed into the wall. Um so yeah this is a very longstanding bug. Uh I think the most um the most immediate uh effect that this had was on um data quality metrics. Uh there are a few data quality metrics that indicate the percentage of traces that uh are complete that they have the root span uh that they're connected or disconnected and uh life traces were meant to improve uh those types of traces. So there are less disconnected traces, less rootless traces. Um and yeah, we were not respecting that. So the percentage was of of those quality metrics was a bit deceiving. Uh and yeah uh this was this has been a very surprising back for us. Uh very I don't know like funny story I think we'll be telling. We thought life traces existed in tempo. We've been speaking about that for a very long time and they actually didn't really exist. Um but um so the main use case for life traces is that traces are contiguous. Um so reading them is more performant and tempo was performant without that improvement. So now we should see uh better performance when just inspecting traces, retrieving traces basically because it's now the it should be a continuous read instead of a fragmented read uh every like 10 seconds there is a new flush to the wall and traces were fragmented that way. So I I think um for most users they should have a minor um uh minor impact um just maybe uh better performance. Um, but yeah, I I wanted to highlight cuz I don't know, I thought it was uh very I think it was funny how this buck has stayed in tempo for like four or five years uh and noticed. Awesome. And yep. All right. And I think that moves us probably into maybe our major topic, especially since I think we have who kind of sparked it. pavl with uh rhythm rf1 and kafka. So I think you had asked in the community channel maybe a month ago maybe a little bit longer about alternatives to that and so uh this might end up being the Mario show today. I'm sure he has the most opinions about this, but um if you want to speak up and kind yeah have and uh you know kind of expound on this a little bit on what you're kind of wanting to do or ideas uh this is a great time to discuss it. Yeah, sure. And hi everyone. Um yeah, I would like to discuss this maybe in bit more detail. Um first of all like when do you plan to release the new architecture? Um and most importantly um if there is a chance we can keep the cafkalas option uh at least like a community efforts uh maybe you know establish some some APIs that will uh be able to plug in some alternative to Kafka uh or something that will not require any additional third party components to to run tempo. essentially uh as yes uh so yeah thanks for reaching out um so as for releasing the new architecture uh we don't have a very strict date we haven't committed to that um I think a reasonable estimate is the second half of this year so sometime in Q3 Q4 uh we're targeting to do a major release with a new architecture uh so We're we're continuously releasing new components and new um like more developments uh to the new architecture. Um and it can be run actually part of it right now with uh 28 and 27 and 26. Uh but with this major release we intend on fully migrating basically to the Neo architecture. And uh as for um supporting a capless uh version, so in in Grafana cloud, we mostly run um tempo distributed uh with microservices. Uh I think we have very few installations of the single binary what we call it. Uh just one one process running the whole tempo. Um so that's what we mostly focus on but we know that the community uh they mostly use based on on the stats that we have they mostly use the sing single binary option. So we don't want to alien alienate um the whole community and just kill that option uh because it's a what we care about the community is the introduction to tempo basically and actually very few people run the distributor mode. So the state of the of the new architecture how it's designed right now is very tied to some CFKA concepts and it uses the Kafka API. So uh it would be difficult for us right now to support anything besides something that's Kafka compatible. So we rely on things like partitions, topics, consumer groups and none of these cafka concepts are abstracted. Uh basically so um what we're intending on doing is trying to find a or what would be best for us is to support something that uses that is Kafka compatible. basically but what we would be happy to commit to is to use a small surface of the whole cafka. We currently only use a few calls uh we pull uh for records we list off um and a few other calls. Uh so the surface is think quite limited and implementing implementing something um that has uh that supports that I think is feasible. uh but that would be our preferred approach to it uh essentially and I I think there are many ways forwards uh from building something into tempo um or having sort of like a Kafka simulator that runs with tempo depending I think um on on the requirements for this solution if like the level of durability persistence high availability um depending on those requirements this I think the solution can uh vary a lot um I don't know what you had in mind in terms of um that if you were would be okay with a in-memory solution for example or you thinking more uh more durable uh solution like right into this kind of know yeah I think there will be definitely some tradeoffs that we will need to make um um at this point I think what we are looking for is to understand what are the implications and if there is a willingness to to make this work in the community. Um we probably need to spend bit more time to understand the changes that are coming with new architecture and um then take it from there. Maybe build some proof of concept and see how it goes and what are the options and what will be the trade-offs um to support such solution. Um and the Q2 I think is coming pretty quickly uh pretty much uh and so maybe it would be help helpful to have at least I'm not sure how difficult it is to understand the um the changes but if you had something that you could share like a um draft of talks or or some design or something like that that would help us to to get started and maybe um then to consult if the approach is good or or bad that we're taking. Uh yes, definitely. I mean we have um a ton of design docs, documents, diagrams of the new architecture. Um, we haven't shared them, not because we want them to we we want to keep them private, but uh cuz it's easier for us to move uh when we don't put stuff out there prematurely. Uh but yeah, we're uh happy to share the main changes, the new architecture, how it looks like. Um if you know Sean uh which is the uh new architecture of or the name of the project of the new architecture for Mimir uh that's a very good starting point because it's very similar extremely similar um with some minor differences um to be better adapted uh to tempo but the main concepts uh are the same. So you'll see the shooters writing to Kafka and then there are a few components that consume from Kafka that is all the same. So um to to get the basic concepts uh I think looking into the sig documentation is I think there is a blog post. Um yeah yeah I was going to share the link to to the blog post uh Mario. Yeah. Uh but yeah uh I I agree we should um or like I'm I'm happy to share more information about these changes. Um so yeah uh I'll chat with Jim our docs person. Uh she'll help me to make something readable and that is easy to consume. That's super helpful. Yeah, I think Mario what we should call out also uh like as Pavo mentioned tradeoff, right? Like also mentioned the benefit of the new architecture. So that make sure that we not only think about like the uh the tooling that's involved to move over but also the benefit, right? What what will they be gaining uh from moving over? Yeah. Um I raised my hand because I have a question for Babel. Are you primarily looking at is your primary concern for single binary mode or for distributed mode replace like with CFKA because those have very two very different states of the union so to speak. That's excellent question. I think for both uh but primarily the distributed modes. Yeah. So that's a harder um uh that's a bigger hill to climb. It feels like I think Mario may correct me, but that just feels a lot more effort, but I think maybe we can kind of with these docs put out why we're making it and maybe that will help point towards something that's maybe a go library off the shelf that maybe mimics it in a way that maybe not as uh resilient as Kafka, but gets us by. Yeah, that's a very good question. Thanks, Matt. because I I've always been assuming that this was mainly for uh single binary. I don't know why I assume that. Yeah. Yeah. I I had as little assumption like when you started talking about the single mode that this is something that you guys want to support without Kafka as well because of the community that uses um it's used mostly outside graphical cloud. Okay. Uh Andre asked a question. Um how would the CFKA dependency work in single binary mode? Uh it would work the same as in distributed. Um you just need to point Empo to a CFKA compatible system and it'll write and read from it. Uh there is no difference and single binary will have will work with Kafka from the start. it currently can work with Kafka. Uh what I was referring to more was we want to make to make it work without CFKA as well. Um because the single binary is sort of the entry point to Tempo and we want to maintain that experience as smooth as possible. If you have to run Kafka um just to get started with tempo that can cause some uh friction uh we think uh but it's um for distributed mode is also like um very good question uh yeah should all right so I have a question for uh I mean are you thinking different queuing system for distributed mode like instead of Kafka are you thinking about like other durable cues or like a more generic abstraction instead of Kafka API? We would like to avoid introducing another system in the deployment. Okay. So like you are more interested in running tempo without like one extra dependency that's a durable cube. Exactly. Okay. Thank you. And do you know what rough requirements you would have in terms of availability, durability because that would have a major impact on on the potential solution. Like it could same. But yeah, there will be trade-offs like but if we can keep things similar to the old architecture in terms of um those aspects that would be good for us. Mhm. Okay. Um right. Yeah, I think let's uh we need to share more information and then we can discuss about trade-offs because um I think there are like many options from a simple implementation of an memory queue in the distributor for example to something more um more complex like I don't know writing to disk or writing to object storage and having something that mimics the calf API while writing to um like this or object storage. Um yeah, yeah, I don't see an issue kind of around this topic in the tempo repository. So I'll create one after the call and p uh tag you babble and we can kind of start putting maybe the requirements and um you know brainstorm there um asynchronously and kind of build up and I think it'll also be a good jumping point to kind of be able to add docs or link to docs as we release on here's here's why we made this choice and then try to compare it with what like what would be an optimal both for distributed and single binary without a for world. So that'll be an action item for me after this call. Thank you. Go again. So in preparation for the upcoming release and architecture change, we've been working a lot on the documentation structure and I we've would love some input. So, I'll post on the community forum what we're looking at doing and if anybody would like to like give feedback or ideas or suggestions, I would be very thankful to have that. Can we expect temple 2 9 before the um change to Kafka? Oh yes, definitely. Um I think at least one release. I I would be shocked uh if we we don't get to three uh sorry we get to 3.0 O before 29 or even 210. Uh yeah, I think we're a couple of releases away. Um we haven't even completed the full rearchitecture. There are some things that need changing. So we've introduced Capka already um into the Bright Path. uh but there's still work to introduce it in in other components uh in what in the old architecture was the injustice. So there's still uh work to do. So it's not imminent that we're migrating uh or releasing the new architecture. Um it'll it'll take some uh quarters still for it to be official basically. We have a question from Robert Jacob. Um, when is tempo 3.0 and the change to Kafka scheduled? So, we kind of answered that second half maybe Kafka scheduled, but uh what about tempo 3.0? Yeah, I think right now uh Joe and I are thinking uh the changes to Kafka will probably be in the 30 release. We haven't talked about a date yet, but like Mario was saying, definitely sometime the latter part uh of this year. So maybe late Q3, early Q4 is what we're targeting. But it also depends on uh the component that Mario mentioned, right? The read path component when that is going to be finalized. So um yeah, that roughly that's the timeline. Um yes and also for uh you come in zoom both are the same thing sort of so we're introducing the new architecture bit by bit and new components of the new architecture can already be found in previous minor versions of tempo 2 like in 26 27 28 you can already run uh a version of the new architecture um but yeah it won't be the official ual way of running tempo and until 3 3.0 uh while we have tempo 2 something uh will support both things. Uh classic tempo will be the official uh way of running tempo and the new architecture will be slowly introduced uh but always sort of like configurable uh that you need to explicitly uh run it that way. Essentially, yeah. Oh, well, thanks for answering that. Um, are you I'm aware that Loki is planning a similar change. Um, I'm assuming that the same teams are working on this. Um uh surprisingly no. Uh I think so there is a different team for each database. Um and we're working independently. I mean we we share uh information and we work together but each team is working on each database uh independently. And I think all the new architectures are very similar because we were hitting the same problems because they were based on the same architecture original architecture. Uh all three databases and even the previous version of Periscope were based on Cordex the metrics database and they all have distributors injustice query front ends querers and I think it got to a point in which all databases were hitting the same breaking point at the same time and all investigating independently we arrived to the same conclues. ution and we surely influenced each other uh but yeah team is working on on the the version of the new architecture so because I'm I'm kind of asking this because the timeline for Loki seems to be a bit further into the future. Um they announced this I think two weeks ago for look E4 and then said it's about a week out a year out. Um and so this gives a bit more time to prep prepare for that change. Mhm. I yeah I think the the lucky new architecture is way more ambitious than ours and contains more changes than uh we're aiming. uh we won't do major changes to the internals of tempo besides this architectural change of introducing durable Q that there there aren't changes to say the block formats or using parket or the query engine none of that is being changed I believe some of that is significantly being changed in Loki I think that's by other changes as well. They have a yeah a longer timeline. Um yeah. Okay. Yeah. If if for tempo it feels a very short uh timeline uh I I don't feel we want to leave uh the classic architecture behind uh very drastically. Uh we're we're open to supporting. So we'll we want to I mean the previous release will not immediately disappear with a new release. Exactly. So there are a couple of things. Uh so for the people that want to migrate or and can migrate to the new architecture uh we want we will make a migration guide so um everyone can migrate as smoothly as possible. Uh we're doing it ourselves. we're migrating our cloud offering to the new architecture. So, we'll have experience with that with that process. Uh although we're not sure how we're going to present it uh to open source because um we don't want it to be like a 20 step long process that takes uh a month to do. So, there'll have to be a middle ground. Um, so that's for the people that can and want to migrate uh to 3 3.0 to the new architecture. And for the people that can't or don't want to migrate, obviously the old versions, uh, the 2 something versions will still be available and we'll still patch them if they're critical, um, bugs. Um and yeah, we we also want to do as much as we can to support this cafkalist versions uh and involve the community if there is a loss of interest which it seems there there is. I mean ideally we we have some kind of alternative solution up until the kind of 3.0 or 4.0 cut comes 3.0 for tempo and 4.0 low for Loki um and then have the remaining time of the maintenance of the previous version to kind of roll this out to customers. So so um Mhm. I would so I would guess it's probably still a year or even more than that to make a decision on this finally. And that's um okay. Yeah. Um like I said, we we're we want to uh support as many use cases as possible while keeping it maintainable. Uh so yeah there there's different paths um for the different needs of uh of the tempo uses and we'll see how we can better support each each of them. Thanks. All right. Um, any other questions or comments on this topic? All right, I think that runs us through our agenda. Does anyone have anything they would just like to bring up or ask or comment on? All right. If nothing else, then we appreciate everybody coming here. We had some great conversation and a few action items come out of this. So, appreciate everybody showing up and we will see you next month. Thank you all. Thanks. See you. Thank you. Bye-bye.

